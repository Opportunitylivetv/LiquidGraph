<html>

<head>
<title> Liquid Graph</title>

<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<meta property="og:title" content="Liquid Graph"/>
<meta property="og:type" content="website"/>
<meta property="og:url" content="http://petercottle.com/liquidGraph/index.html"/>
<meta property="og:image" content="http://petercottle.com/liquidGraph/Capture3.PNG"/>
<meta property="og:site_name" content="LiquidGraph"/>
<meta property="og:description" content="An AI solver for rotating particles out of a 2D maze. Coded by Peter Cottle"/>


<link href="style.css" rel="stylesheet" type="text/css"/>



</head>


<body>

<div id="canvasHolder" style="border:1px solid black; box-shadow: 5px 5px 5px black">
</div>

<img src="loading.gif"class="loadingGif"/>

<div id="topNotifyBarWrapper" style="width:100%;text-align:center;position:absolute;top:-100px;height:0px;">
    <div id="topNotifyBarHolder" class="buttonGradient smooth topNotifyBar topNotifyBarHidden bubbleToStop" onclick="topNotifyClear()" style="display:inline-block;cursor:pointer">
        <div id="topNotifyBar">

        </div>
    </div>
</div>

<a id="addPolyButton" class="uiButton">Add Polygon
</a>

<a id="traceButton" class="uiButton">Trace Particle
</a>

<a id="clearButton" class="uiButton uiButtonRed" onclick="javascript:clearAll();">Clear All
</a>

<a id="solveButton" class="uiButton uiButtonWhite">Solve!
</a>

<a id="bombardButton" class="uiButton uiButtonYellow" onclick="javscript:bombard();">Bombard
</a>

<a id="testButton" style="position:absolute;bottom:20px;left:10px;" class="uiButton uiButtonPink" onclick="javascript:testSampling();">Test Sampling
</a>

<a id="editPolyButton" class="uiButton uiButtonYellow">Edit Polygons
</a>

<a id="clearParticlesButton" class="uiButton uiButtonYellow" onclick="javascript:partController.clearAll();">Clear Particles
</a>

<a id="togglePathsButton" class="uiButton uiButtonYellow" onclick="javascript:partController.togglePathPreference();">Toggle Paths
</a>

<a id="importExportButton" class="uiButton uiButtonPink" onclick="javascript:toggleImportExport();">Import / Export
</a>

<div id="dialogWrapper" style="width:100%;bottom:-200px" class="smooth">
    <div id="importExportDialog" class="smooth">

        <div style="text-align:center;margin-top:10px;">
            <textarea id="jsonTextArea" style="width:80%;" rows="5">
{"polys":[{"fillColor":"136-hsb(0.06393695343285799,0.7,1)-hsb(0.263936953432858,0.9,1)","vertices":[{"x":0.5010526315789474,"y":0.1948608137044968},{"x":0.48210526315789476,"y":0.1841541755888651},{"x":0.4768421052631579,"y":0.1423982869379015},{"x":0.5168421052631579,"y":0.07815845824411134},{"x":0.6273684210526316,"y":0.048179871520342615},{"x":0.8031578947368421,"y":0.0867237687366167},{"x":0.9189473684210526,"y":0.15096359743040685},{"x":0.9368421052631579,"y":0.25910064239828695},{"x":0.9147368421052632,"y":0.3758029978586724},{"x":0.8357894736842105,"y":0.39721627408993576},{"x":0.7810526315789473,"y":0.34796573875803},{"x":0.7978947368421052,"y":0.2880085653104925},{"x":0.8547368421052631,"y":0.28693790149892934},{"x":0.8557894736842105,"y":0.25910064239828695},{"x":0.7926315789473685,"y":0.2644539614561028},{"x":0.7610526315789473,"y":0.34796573875803},{"x":0.8073684210526316,"y":0.4464668094218415},{"x":0.9126315789473685,"y":0.4282655246252677},{"x":0.9652631578947368,"y":0.278372591006424},{"x":0.92,"y":0.06423982869379015},{"x":0.7768421052631579,"y":0.031049250535331904},{"x":0.5231578947368422,"y":0.033190578158458245},{"x":0.48210526315789476,"y":0.06209850107066381},{"x":0.4673684210526316,"y":0.1006423982869379},{"x":0.4652631578947368,"y":0.2012847965738758}]},{"fillColor":"107-hsb(0.7442261235788465,0.7,1)-hsb(0.9442261235788465,0.9,1)","vertices":[{"x":0.3094736842105263,"y":0.7430406852248393},{"x":0.31894736842105265,"y":0.17656765676567654},{"x":0.4515789473684211,"y":0.17656765676567654},{"x":0.4515789473684211,"y":0.12376237623762376},{"x":0.2694736842105263,"y":0.11716171617161716},{"x":0.27789473684210525,"y":0.7904290429042904},{"x":0.7431578947368421,"y":0.8003300330033002},{"x":0.728421052631579,"y":0.1419141914191419},{"x":0.5378947368421053,"y":0.14026402640264027},{"x":0.54,"y":0.24257425742574257},{"x":0.6684210526315789,"y":0.24587458745874588},{"x":0.7094736842105264,"y":0.7569593147751607}]},{"fillColor":"37-hsb(0.5863502260297537,0.7,1)-hsb(0.7863502260297537,0.9,1)","vertices":[{"x":0.4926315789473684,"y":0.20985010706638116},{"x":0.37684210526315787,"y":0.21199143468950749},{"x":0.36,"y":0.6927194860813705},{"x":0.5863157894736842,"y":0.6488222698072805},{"x":0.5936842105263158,"y":0.5867237687366167},{"x":0.4242105263157895,"y":0.639186295503212},{"x":0.40842105263157896,"y":0.5513918629550322},{"x":0.5336842105263158,"y":0.5449678800856531},{"x":0.5210526315789473,"y":0.45610278372591007},{"x":0.5789473684210527,"y":0.45289079229122053},{"x":0.5715789473684211,"y":0.5449678800856531},{"x":0.6178947368421053,"y":0.550321199143469},{"x":0.5915789473684211,"y":0.3993576017130621},{"x":0.5168421052631579,"y":0.4079229122055675},{"x":0.48210526315789476,"y":0.5139186295503212},{"x":0.40210526315789474,"y":0.5096359743040685},{"x":0.4010526315789474,"y":0.36509635974304067},{"x":0.4494736842105263,"y":0.3683083511777302},{"x":0.44842105263157894,"y":0.4421841541755889},{"x":0.4726315789473684,"y":0.44967880085653106},{"x":0.47368421052631576,"y":0.33940042826552463},{"x":0.40842105263157896,"y":0.3297644539614561},{"x":0.41578947368421054,"y":0.2580299785867238},{"x":0.5242105263157895,"y":0.21734475374732334},{"x":0.5189473684210526,"y":0.19914346895074947}]},{"fillColor":"125-hsb(0.32713480163365605,0.7,1)-hsb(0.5271348016336561,0.9,1)","vertices":[{"x":0.5715789473684211,"y":0.3715203426124197},{"x":0.6578947368421053,"y":0.367237687366167},{"x":0.6652631578947369,"y":0.607066381156317},{"x":0.6378947368421053,"y":0.6102783725910065},{"x":0.6273684210526316,"y":0.39186295503211993}]},{"fillColor":"36-hsb(0.7977690029889346,0.7,1)-hsb(0.9977690029889346,0.9,1)","vertices":[{"x":0.47368421052631576,"y":0.29978586723768735},{"x":0.43157894736842106,"y":0.2880085653104925},{"x":0.5042105263157894,"y":0.2462526766595289},{"x":0.5126315789473684,"y":0.27944325481798715}]},{"fillColor":"157-hsb(0.29311543963849546,0.7,1)-hsb(0.49311543963849547,0.9,1)","vertices":[{"x":0.5631578947368421,"y":0.30406852248394006},{"x":0.5378947368421053,"y":0.27944325481798715},{"x":0.6536842105263158,"y":0.2676659528907923},{"x":0.6589473684210526,"y":0.3286937901498929},{"x":0.6147368421052631,"y":0.3351177730192719},{"x":0.6178947368421053,"y":0.2987152034261242},{"x":0.5894736842105263,"y":0.3019271948608137},{"x":0.5473684210526316,"y":0.35867237687366166},{"x":0.5368421052631579,"y":0.32762312633832974}]}],"particles":[]}            </textarea>
        </div>

        
        <div style="text-align:center">
            <a id="importButton" class=" uiButtonPink" onclick="javascript:importGeometry()">
            Import
            </a>

            <a id="exportButton" class=" uiButtonPink" onclick="javascript:exportGeometry()">
            Export
            </a>
        </div>
        
    </div>
</div>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<!-- <script type="text/javascript" src="jquery.min.js"></script> -->
<script type="text/javascript" src="raphael-min.js"></script>
<script type="text/javascript" src="liquidGraphUI.js"></script>
<script type="text/javascript" src="liquidGraph.js"></script>
<script type="text/javascript" src="liquidGraphAI.js"></script>


<script type="text/javascript">

$j = jQuery.noConflict();

//globals
var notifyTimeout = null;
var p = null;

var polygonInsertControl = null;
var polyController = null;

var debug = false;


function startLoadingWithText(theText) {
    startLoading();
    topNotify(theText);
}

function stopLoadingWithText() {
    stopLoading();
    topNotifyClear();
}

function topNotifyClear() {
    $j('#topNotifyBar').html('');
    $j('#topNotifyBarHolder').addClass('topNotifyBarHidden');
}

function startLoading() {
    isLoading = true;

    var wHeight = $j(window).height();
    var wWidth = $j(window).width();
    $j('.loadingGif').css('left',String(wWidth/2 - 220*0.5) + 'px');
    $j('.loadingGif').css('top',String(wHeight / 2 - 19*0.5) + 'px');
    $j('.loadingGif').fadeIn();
}

function stopLoading() {
    isLoading = false;
    $j('.loadingGif').fadeOut();
}


function topNotify(theText) {
    topNotifyHtml("<h1>" + theText + "</h1>");
}

function topNotifyTemp(theText,time) {
    if(!time) { time = 3000; }
    topNotify(theText);
    setTimeout('topNotifyClear();',time);
}

function topNotifyHtml(theText) {
    //and if someone is clicking fast, get rid of it
    if(notifyTimeout)
    {
        clearTimeout(notifyTimeout);
    }

    //basically, if its already displayed, hide it and come back in 700ms
    if(!$j('#topNotifyBarHolder').hasClass('topNotifyBarHidden'))
    {
        //clear and come back
        topNotifyClear();
        var jsToExecute = "topNotifyHtml('" + theText + "');";
        notifyTimeout = setTimeout(jsToExecute,700);
        return;
    }

    $j('#topNotifyBar').html("<h1>" + theText + "</h1>");

    $j('#topNotifyBarHolder').removeClass('topNotifyBarHidden');
}

$j(document).ready(function(){

    startLoadingWithText("Hello world!");
    setTimeout('stopLoadingWithText();',1000);
    
    p = Raphael("canvasHolder");

    polygonInserter = new polygonUIControl();
    polyController = new polygonController();
    partController = new particleController();
    particleTracer = new TraceUIControl();
    polyEditor = new EditUIControl();
    solveController = new SolveUIControl();
    bAnimator = new BulkAnimator();

    $j(window).resize(windowResize);
    
    //get the hidden svg later for rotation
    rotationLayer = $j('svg')[0];
    rotationLayerRad = 0;
    $j(rotationLayer).css('-webkit-transform','rotate3d(0,0,1,0rad)');
    
    if(/demo/.test(location.href))
    {
        importGeometry();
        toggleImportExport();
        
        setTimeout(function() {
            var v = polyController.polys[12].vertices[9];
            searcher = new GraphSearcher(v);
            searcher.search();
        },1000);
    }
    
    
});

</script>

</body>

</html>
